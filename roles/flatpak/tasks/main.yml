- name: Sanity Check
  fail:
    msg: Role '{{ role_name }}' is not supported on OS family '{{ ansible_os_family }}'
  when: ansible_os_family not in ['RedHat', 'Debian', 'Suse', 'Gentoo', 'Archlinux', 'Alpine']

- name: Installed
  become: yes
  package:
    name: flatpak
    state: present

- name: Flathub Repository Present
  become: yes
  flatpak_remote:
    name: flathub
    flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
    state: present

- name: Flathub Beta Repository Present
  become: yes
  flatpak_remote:
    name: flathub-beta
    flatpakrepo_url: https://flathub.org/beta-repo/flathub-beta.flatpakrepo
    state: present
